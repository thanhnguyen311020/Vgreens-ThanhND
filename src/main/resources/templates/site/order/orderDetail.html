<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/site/layout/dasboard::dynamic(~{::title},~{::main})}">


<title>Greens | Order Detail</title>

<body>


    <main ng-controller="review-ctrl">






        <div class="titlePage">
            <h1>Chi tiết đơn hàng</h1>
            <div class="link">
                <a href="#">Trang chủ</a> - <a href="#">Đơn hàng</a>
            </div>
        </div>

        <div class="container status-container px-1 px-md-4  mx-auto">
            <!-- <h1 class="text-center">Thông tin vận chuyển</h1> -->
            <div class="card pt-5">
                <div class="row d-flex justify-content-between top">
                    <div class="d-flex">
                        <h5>Mã Đơn Hàng <span class="text-success font-weight-bold">#[[${inforOrder.id}]]</span></h5>
                    </div>
                    <div class="d-flex flex-column text-sm-right">
                        <p class="mb-0">
                        <h5>Ngày Giao Hàng: <span class="text-success">[[${#calendars.format(inforOrder.deliver_date,
                                'EEE ,dd-MM-yyyy')}]]</span></h5>
                        </p>
                        <!-- <p>Grasshoppers <span class="font-weight-bold"><a href="https://www.grasshoppers.lk/customers/action/track/V534HB">V534HB</a></span></p> -->
                    </div>
                </div> <!-- Add class 'active' to progress -->
                <div class="row d-flex justify-content-center">
                    <div class="col-12">
                        <ul id="progressbar" class="text-center" th:if="${inforOrder.status ==0}">
                            <li class="active step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                        </ul>
                        <ul id="progressbar" class="text-center" th:if="${inforOrder.status ==1}">
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                        </ul>
                        <ul id="progressbar" class="text-center" th:if="${inforOrder.status ==2}">
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                        </ul>
                        <ul id="progressbar" class="text-center" th:if="${inforOrder.status ==3}">
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class=" step0"></li>
                        </ul>
                        <ul id="progressbar" class="text-center" th:if="${inforOrder.status ==4}">
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                            <li class="active step0"></li>
                        </ul>
                        <ul id="progressbar" class="text-center" th:if="${inforOrder.status ==5}">
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                            <li class=" step0"></li>
                        </ul>
                    </div>
                </div>
                <div class="row  top img-status">
                    <div class="row status-item icon-content"> <img class="icon" src="https://i.imgur.com/9nnc9Et.png">
                        <div class=" flex-column">
                            <p class="">Chờ Xác Nhận</p>
                        </div>
                    </div>
                    <div class="row status-item  icon-content"> <img class="icon" src="https://i.imgur.com/GiWFtVu.png">
                        <div class=" flex-column">
                            <p class="">Đã Xác Nhận</p>
                        </div>
                    </div>
                    <div class="row status-item icon-content"> <img class="icon" src="https://i.imgur.com/u1AzR7w.png">
                        <div class=" flex-column">
                            <p class="">Đang Lấy Hàng</p>
                        </div>
                    </div>
                    <div class="row status-item icon-content"> <img class="icon" src="https://i.imgur.com/TkPm63y.png">
                        <div class=" flex-column">
                            <p class="">Đang Vận Chuyển</p>
                        </div>
                    </div>
                    <div class="row status-item icon-content"> <img class="icon" src="https://i.imgur.com/HdsziHP.png">
                        <div class=" flex-column">
                            <p class="">Đã Giao Hàng</p>
                        </div>
                    </div>
                </div>
            </div>
            <th:block th:if="${tracklist!=null}">
                <div class="card display-none">
                    <div class="row d-flex justify-content-between px top mt-4" th:each="tracklist : ${tracklist}">
                        <div class="d-flex">
                            <h5><span
                                    class="text-success font-weight-bold">[[${#calendars.format(tracklist.created_time,
                                    'dd/MM/yyyy HH:mm:ss')}]] </span>



                                <span class="font-weight-bold ml-3">[[${tracklist.title}]]:</span>

                                <span class="font-weight-bold ml-3">[ [[${tracklist.description}]] ] </span>
                            </h5>
                        </div>
                    </div>
                    <!-- <div class="row d-flex justify-content-between px top">
                    <div class="d-flex">
                        <h5><span class="text-primary font-weight-bold">2020-06-04 06:59:48 AM </span>ATTEMPT 1 COMPLETED. ~ ***[AUTO GENERATED BY GRASSHOPPERS]***</h5>
                    </div>
                </div>
                <div class="row d-flex justify-content-between px top">
                    <div class="d-flex">
                        <h5><span class="text-primary font-weight-bold">2020-06-04 06:59:48 AM </span>RETURN TO VENDOR RECORD CREATED ~ RC806_118 </h5>
                    </div>
                </div> -->
                </div>
            </th:block>


        </div>


        <section class="_orderDetail">


            <div class="row orderDetail-container m-2">

                <form class=" m-auto ">
                    <h1 class="text-center">Thông tin người mua</h1>
                    <div class="row">
                        <div class="col-6">
                            <input type="hidden" name="" th:value="${inforOrder.id}" id="orderDetailId">
                            <div class="form-group">
                                <label for="fullname">Họ</label>
                                <input type="text" th:value="${inforOrder.last_name}" readonly class="form-control"
                                    name="last_name" id="last_name" aria-describedby="helpId" placeholder="">
                            </div>

                            <div class="form-group">
                                <label for="">Số điện thoại</label>
                                <input type="text" th:value="${inforOrder.phone_number}" readonly class="form-control"
                                    name="phone_number" id="phone_number" aria-describedby="helpId" placeholder="">
                            </div>
                            <div class="form-group">
                                <label for="">Phương thức thanh thoán</label>
                                <input type="text"
                                    th:value="${inforOrder.payment_method}+' , '+ ${inforOrder.payment_status}" readonly
                                    class="form-control" name="phone_number" id="phone_number" aria-describedby="helpId"
                                    placeholder="">
                            </div>


                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label for="fullname">Tên</label>
                                <input type="text" th:value="${inforOrder.first_name}" readonly class="form-control"
                                    name="first_name" id="first_name" aria-describedby="helpId" placeholder="">
                            </div>
                            <div class="form-group">

                                <label for="createDate">Ngày mua hàng</label>
                                <input type="text"
                                    th:value="${#calendars.format(inforOrder.createDate, 'HH:mm:ss - dd/MM/yyyy')}"
                                    readonly class="form-control" name="createDate" id="createDate"
                                    aria-describedby="helpId" placeholder="">
                            </div>
                            <div class="form-group">
                                <label for="amount">Tổng tiền</label>
                                <input type="text" style="color: var(--main)" readonly
                                    th:value="${#numbers.formatDecimal(inforOrder.amount,0,'COMMA',0,'POINT')}"
                                    class="form-control" name="amount" id="amount" aria-describedby="helpId"
                                    placeholder="">

                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="">Địa chỉ</label>
                                <input style="height: 60px;" readonly
                                    th:value="${inforOrder.address_line} +', '+ ${inforOrder.state} +', '+ ${inforOrder.country}"
                                    class="form-control" name="" id="" rows="3"></input>
                            </div>
                        </div>

                    </div>
                </form>

                <div style="overflow-x: auto;" class="col-12 p-0">
                    <table class="list-detail m-auto">
                        <tr>
                            <th class="text-center">No.</th>
                            <th class="text-center">Hình ảnh</th>
                            <th class="name">Tên sản phẩm</th>
                            <th class="text-center name">Giá bán</th>
                            <th class="text-center">Số lượng</th>
                            <th class="text-center name">Tổng tiền</th>
                            <th class="name"></th>
                            <!-- <th class="ratting-btn"> Đánh giá</th> -->
                        </tr>
                        <tr th:each="detailList,state : ${detailList}">
                            <td class="text-center">[[${state.index+1}]]</td>
                            <td style="text-align: center;"> <img th:src="@{${detailList.product.image}}" alt=""></td>
                            <td>

                                <h > <a  th:href="@{'/vgreens/product/detail/'+${detailList.product.id}}">[[${detailList.product.name}]]</a> </h>
                            </td>
                            <td class="text-center">
                                [[${#numbers.formatDecimal(detailList.unit_price,0,'COMMA',0,'POINT')}]] .đ</td>
                            <td class="text-center">[[${detailList.quantity}]]</td>
                            <td class="text-center" th:if="${detailList.product.discount}==null"
                                style="color:var(--main); font-weight: 500;">
                                [[${#numbers.formatDecimal(detailList.product.consignment.selling_price*detailList.quantity,0,'COMMA',0,'POINT')}]] .đ
                            </td>
                            <td class="text-center" th:if="${detailList.product.discount}!=null"
                                style="color:var(--main); font-weight: 500;">
                                [[${#numbers.formatDecimal((detailList.product.consignment.selling_price-detailList.product.consignment.selling_price*detailList.product.discount.percent_discount/100)*detailList.quantity,0,'COMMA',0,'POINT')}]] .đ
                            </td>
                            <td class="ratting-btn"> <button th:if="${inforOrder.status}==4" class="fas fa-star"
                                    data-toggle="modal" data-target="#exampleModal" th:value="${detailList.product.id}"
                                    id="id-product"
                                   
                                     th:attr="ng-click=@{|selectItem(${detailList.product.id})|}"
                                    
                                    >Đánh giá</button> </td>


                            <!-- th:attr="ng-click=@{|hienthi(${detailList.product.id})|}" -->
                            <th:block th:replace="@{/site/order/_modalrating}">

                            </th:block>
                        </tr>
                    </table>

                </div>


            </div>
            <a href="product.html" class="_btn">Tiếp tục mua sắm</a>

        </section>







    </main>



</body>

</html>